linux环境下搭建php运行环境
一、安装httpd-2.2.34.tar.gz
1.到官网下载  http://httpd.apache.org/
2.解压	tar  -zxvf httpd-2.2.34.tar.gz
	tar命令:
	-z,--gzip,--ungzip
	用 gzip 对存档压缩或解压。用gzip来压缩/解压缩文件，加上该选项后可以将档案文件进行压缩，但还原时也一定要使用该选项进行解压缩。
	-x 从档案文件中释放文件。
	-v 详细报告tar处理的文件信息。如无此选项，tar不报告文件信息。-v,--verbose详细显示处理的文件
	-f 使用档案文件或设备，这个选项通常是必选的。--file [HOSTNAME:]F指定存档或设备 （缺省为 /dev/rmt0)
3.建立目标文件夹（注意以下所有操作都时在root用户下执行的）
mkdir /usr/local/apache
也就是说等下安装的apache要安装到这个文件夹里面
4.配置
回到原来解压之后产生的文件夹
./configure --prefix=/usr/local/apache --enable-module=shared
要加上后面的参数，否则无法使用php，-enable-module=shared表示Apache可以动态的加载模块

	什么是apr,apr-util,iconv
	The mission of the Apache Portable Runtime (APR) project is to create and maintain software libraries that provide a predictable and consistent interface to underlying platform-specific implementations. The primary goal is to provide an API to which software developers may code and be assured of predictable if not identical behaviour regardless of the platform on which their software is built, relieving them of the need to code special-case conditions to work around or take advantage of platform-specific deficiencies or features.
	APR(Apache portable Run-time libraries，Apache可移植运行库)，主要为上层的应用程序提供一个可以跨越多操作系统平台使用的底层支持接口库。在早期 的Apache版本中，应用程序本身必须能够处理各种具体操作系统平台的细节，并针对不同的平台调用不同的处理函数。
	那安装Apache的时候为什么必须安装Apr呢？
	在早期的Apache版本中，应用程序本身必须能够处理各种具体操作系统平台的细节，并针对不同的平台调用不同的处理函数。随着Apache的进一步开发，Apache组织决定将这些通用的函数独立出来并发展成为一个新的项目。这样，APR的开发就从Apache中独立出来，Apache仅仅是使用APR而已。
	一般情况下，APR开发包很容易理解为仅仅是一个开发包，不过事实上并不是。目前，完整的APR实际上包含了三个开发包：apr、apr-util以及apr-iconv，每一个开发包分别独立开发，并拥有自己的版本。
	apr中包含了一些通用的开发组件，包括mmap，DSO等等
	apr-util该目录中也是包含了一些常用的开发组件。这些组件与apr目录下的相比，它们与apache的关系更加密切一些。比如存储段和存储段组，加密等等。
	apr-iconv包中的文件主要用于实现iconv编码。目前的大部分编码转换过程都是与本地编码相关的。在进行转换之前必须能够正确地设置本地编码。因此假如两个非本地编码A和B需要转换，则转换过程大致为A->Local以及Local->B或者B->Local以及Local->A。
	
	安装apr和apr-util(安装apache需要这两个扩展包). tar -zxvf
	安装apr ./configure --prefix=/usr/local/apr make make install
	安装apr-util ./confgiure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr make make install
	
	安装apache ./configure --prefix=/usr/local/apache2 --enable-module=shared --with-included-apr
	
	
	编辑 /usr/local/apache2/conf/httpd.conf 文件     
	找到：
	AddType  application/x-compress .Z
	AddType application/x-gzip .gz .tgz
	在后面添加：
	AddType application/x-httpd-php .php（使Apcche支持PHP）
	AddType application/x-httpd-php-source .php5
    找到：
    <IfModule dir_module>
    DirectoryIndex index.html
    </IfModule>
    添加：
    <IfModule dir_module>
    DirectoryIndex index.html index.php
    </IfModule>
    找到：
    ＃ServerName www.example.com:80
    修改为：
    ServerName 127.0.0.1:80或者ServerName localhost:80
    记得要去掉前面的“＃”

二、安装php
1.建立目标文件夹 
2.配置 
	./configure --prefix=/usr/local/php  --with-apxs2=/usr/local/apache2/bin/apxs
	注意这里有一个-with-apxs2=/usr/local/apache/bin/apxs选项，其中apxs是在安装Apache时产生的，apxs是一个为Apache HTTP服务器编译和安装扩展模块的工具，使之可以用由mod_so提供的LoadModule指令在运行时加载到Apache服务器中。我的理解是通过这个工具把PHP模块动态加载到Apache中
3.配置文件
    cp php.ini-development /usr/local/php/lib/php.ini
    把原来位于源代码里面的php.ini-development拷贝到/usr/local/php/lib/php.ini下，并且重命名为php.ini
	设置时区

三、安装MySQL
1.下载
    到官网下载mysql-5.1.65.tar.gz（注意是源码包）（版本较低）
2.建立目标文件夹
    mkdir /usr/local/mysql
3.配置
	./configure --prefix=/usr/local/mysql/
4.编译安装 make && make install
5.启动
    MySQL服务并不会自动启动，还需要先初始化MySQL数据库，操作如下：
    cd /usr/local/mysql/bin
    sudo ./mysql_install_db --user=root
    注意，这里最后的root是指可以操作数据库的用户，可以是当前用户，也可以新建用户，与linux上的root用户是两回事，可以自己取一个名字
    ./mysqld_safe --user=root & 这条命令负责启动mysql服务的守护进程，此外最后的&时必须的，因为希望守护进程在后台运行
    这里的root就是刚才的那个
6.为根用户创建密码
	./mysqladmin -u root password 123456
	如果root已经设置过密码，采用如下方法
	./mysqladmin -u root password oldpass ‘123456’ 
7.测试
	
四、将PHP与MySQL结合起来
1.重新配置PHP，改变配置选项，只需重复PHP安装时的最后的三步configure, make, 以及 make install，然后需要重新启动 Apache 使新模块生效，Apache不需要重新编译。
2.配置
./configure --prefix=/usr/local/php  --with-apxs2=/usr/local/apache2/bin/apxs --with-mysqli=/usr/local/mysql/bin/mysql_config  注意mysql_config 的路径

安装mbstring扩展