<table id="example" class="display" cellspacing="0" width="100%">
    <thead>
    <tr>
        <th>ID</th><th>TAG</th>
		<!--<th>CP</th>-->
		<th>应用名称</th><th>包名</th>
		<th>任务标题</th><th>开始/结束时间</th><th>任务类型</th><th>国家语言</th>
		<th>是否启用</th><th>启用状态</th><th>计划数</th><th>下发数</th>
		<th>提交数</th><th>成功数</th><th>展开</th><th>操作</th>
		<!--<th>跳转</th>-->
		<th>优先级</th><th>评论概率</th><th>评论操作</th><th>最后操作</th>
    </tr>
    </thead>

    <tbody>
    <volist name="data" id="vo">
        <tr>
            <td><{$vo.id}></td>
            <td><{$vo.tag}></td>
            <!--<td><{$vo.cp}></td>-->
			<td><{$vo.game_name}></td>
            <td><div style="overflow-y: scroll;width: 200px;height: 40px;white-space: normal;"><{$vo.package_name}></div></td>
            <td><{$vo.task_name}></td>
            <td><{$vo.group_start}><br><{$vo.group_end}></td>
            <td><{$vo.task_type}></td>
            <td><{$vo.country}></td>
            <td><{$vo.status}></td>
            <td id=<{$vo.exception}> ><{$vo.status_success}></td>
            <td><{$vo.total_count}></td>
            <td><{$vo.issued_nums}></td>
            <td><{$vo.submit_nums}></td>
            <td style="color:red;"><b><{$vo.success_nums}><if condition="$vo['rate_success']"><br />(<{$vo.rate_success}>)</if></b></td>
            <td><{$vo.zhankai}></td>
            <td><{$vo.caozuo}></td>
            <!--<td><{$vo.link}></td>-->
            <td><{$vo.score}></td>
            <td><{$vo.comment_rate}></td>
            <td><{$vo.comment_type}></td>
            <td><{$vo.admin_name}><{$vo.operate_type}></td>
        </tr>
    </volist>
    </tbody>
</table>

<div class="group_detail_div" style="display: none;position: absolute;background-color: #00E8D7;padding: 10px">
    <div style="height: 18px">
        <span class="icon_delete group_close" style="cursor: pointer;display: inline;float: left"></span>
        <span class="icon_delete group_close" style="cursor: pointer;display: inline;float: right"></span>
    </div>
    <div class="group_detail"></div>
</div>
<script>
    $(function(){
        $('select[name="task_status"]').val("<{$task_status}>");
    });

    $(document).ready(function() {
        $('#example').dataTable({
            "aaSorting": [[ 1, "desc" ]],
            "aLengthMenu":[100,50,10],
            "oLanguage": {    // 语言设置
                "sLengthMenu": "每页显示 _MENU_ 条记录",
                "sZeroRecords": "抱歉， 没有找到",
                "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
                "sInfoEmpty": "没有数据",
                "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
                "sZeroRecords": "没有检索到数据",
                "sSearch": "检索:",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "前一页",
                    "sNext": "后一页",
                    "sLast": "尾页"
                }
            },
        });
    });

    $(".open_group").click(function(){
        var groupid = $(this).attr('attr');
        var url = "index.php?m=Home&c=Task&a=taskGroupDetailList";
        $.ajax({
            url : url,
            type : 'post',
            data:{groupid:groupid},
            success : function(data){
                $(".group_detail").html(data);
                var top = ($(window).height() - $("#popDiv").height())/2;
                var scrollTop = $(document).scrollTop();
                $(".group_detail_div").css( { 'display' : 'block', 'top' : top + scrollTop - 400,'margin-left' : '30px'} ).show();

                $("table .ajax").each(function () {
                    $(this).click(function () {
                        var the = $(this);
                        var url = $(this).attr('ajax');
                        var url_arr = url.split("&");
                        if (url == '' || $(the).hasClass('ajax_sel'))
                            return;

                        var load = setTimeout('loading(1)', 300);
                        $.post(url, '', function (data) {
                            clearTimeout(load);
                            loading(0);
                            notice(data.info);
                            if (data.status == 1) {
                                $(".ajax", $(the).parent()).removeClass('ajax_sel');
                                $(the).addClass('ajax_sel');
                                if(url.indexOf("table=client_mst")){
                                    window.location.reload();
                                }
                            }
                        }, 'json');
                    });
                });
            }
        });
        return false;
    });

    $(".group_close").click(function(){
        $(".group_detail_div").hide();
    });

    $("table .ajax_self").each(function () {
        $(this).click(function () {
            var the = $(this);
            var url = $(this).attr('ajax');
            var url_arr = url.split("&");
            if (url == '' || $(the).hasClass('ajax_sel'))
                return;

            var load = setTimeout('loading(1)', 300);
            $.post(url, '', function (data) {
                clearTimeout(load);
                loading(0);
                notice(data.info);
                if (data.status == 1) {
                    //window.location.reload();
                }
            }, 'json');
        });
    });
</script>